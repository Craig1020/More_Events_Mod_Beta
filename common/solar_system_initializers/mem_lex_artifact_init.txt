### MEM Ancestor Prison
# Code & idea by Frog, writing by Cc

mem_gate = {

	name = "Nihara"

	class = "sc_pulsar"
	
	asteroids_distance = 100

	flags = {
	    mem_gate_system
	    guardian
		hostile_system
	}
	
	max_instances = 1

	planet = {
		class = "pc_mem_star_dummy"
		orbit_distance = 0
		orbit_angle = 0
		size = 1
		has_ring = no
		
		flags = {
			mem_gate_star
		}
		
		init_effect = {
			prevent_anomaly = yes
			orbital_deposit_tile = {
                clear_deposits = yes
            }
			save_global_event_target_as = mem_artifact_relic_loc
			create_ambient_object = {
				type = "mem_artifact_relic_alt_object"
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:mem_artifact_relic_loc
					distance = 1
					angle = 0
				}
				set_ambient_object_flag = mem_artifact_relic_alt_target
			}
			create_ambient_object = {
				type = "mem_artifact_station_alt_object"
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:mem_artifact_relic_loc
					distance = 90
					angle = 60
				}
				set_ambient_object_flag = mem_artifact_alt_ward_1
			}
			create_ambient_object = {
				type = "mem_artifact_station_alt_object"
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:mem_artifact_relic_loc
					distance = 90
					angle = 180
				}
				set_ambient_object_flag = mem_artifact_alt_ward_2
			}
			create_ambient_object = {
				type = "mem_artifact_station_alt_object"
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:mem_artifact_relic_loc
					distance = 90
					angle = 300
				}
				set_ambient_object_flag = mem_artifact_alt_ward_3
			}
			create_ambient_object = {
			type = "mem_cloud_ambient_object"
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:mem_artifact_relic_loc
					distance = 0
					angle = 0
				}
				set_ambient_object_flag = mem_artifact_relic_fog
			}
		}
	}
	
	change_orbit = 100
	
	planet = {
		count = 1
		class = random_asteroid
		orbit_distance = 0
		orbit_angle = 120
		
		flags = {
			mem_gate_stone_1
		}
		
		init_effect ={
			prevent_anomaly = yes
			orbital_deposit_tile = {
                clear_deposits = yes
            }
		}
	}

	planet = {
		count = 1
		class = random_asteroid
		orbit_distance = 0
		orbit_angle = 120
		
		flags = {
			mem_gate_stone_2
		}
		
		init_effect ={
			prevent_anomaly = yes
			orbital_deposit_tile = {
                clear_deposits = yes
            }
		}
	}

	planet = {
		count = 1
		class = random_asteroid
		orbit_distance = 0
		orbit_angle = 120
		
		flags = {
			mem_gate_stone_3
		}
		
		init_effect ={
			prevent_anomaly = yes
			orbital_deposit_tile = {
                clear_deposits = yes
            }
		}
	}
	
	change_orbit = 100

	planet = {
		class = pc_gas_giant
		orbit_distance = 0
			orbit_angle = 60
		    modifiers = none
			has_ring = yes
			tile_blockers = none
			size = 40
			
			flags = {
				mem_gate_gas_giant
			}
			
			init_effect = {
				prevent_anomaly = yes
			}

		moon = {
			class = "pc_shrouded"
			name = "Gandvik"
		    orbit_distance = 25
		    orbit_angle = -150
		    has_ring = no	
		    size = 10
			
			flags = {
				mem_gate_shrouded
			}
			
			init_effect = {
				prevent_anomaly = yes
			    orbital_deposit_tile = {
                clear_deposits = yes
                }
				orbital_deposit_tile = {
					add_deposit = d_zro_deposit
				}
				create_ambient_object = {
				type = "abandoned_starbase_01_object"
				location = THIS
			    }
			}
		}	
	}

	init_effect = {
		create_ambient_object = {
			type = "abandoned_ship_2_object"
			location = solar_system
		}
		create_ambient_object = {
			type = "abandoned_ship_2_object"
			location = solar_system
		}
		create_ambient_object = {
			type = "abandoned_ship_2_object"
			location = solar_system
		}
		create_ambient_object = {
			type = "abandoned_ship_2_object"
			location = solar_system
		}
		create_ambient_object = {
			type = "abandoned_ship_2_object"
			location = solar_system
		}
		create_ambient_object = {
			type = "large_debris_object"
			location = solar_system
		}
		create_ambient_object = {
			type = "large_debris_object"
			location = solar_system
		}
		create_ambient_object = {
			type = "large_debris_object"
			location = solar_system
		}
		create_ambient_object = {
			type = "large_debris_object"
			location = solar_system
		}
		create_ambient_object = {
			type = "large_debris_object"
			location = solar_system
		}
		create_ambient_object = {
			type = "medium_debris_01_object"
			location = solar_system
		}
		create_ambient_object = {
			type = "medium_debris_01_object"
			location = solar_system
		}
		create_ambient_object = {
			type = "medium_debris_01_object"
			location = solar_system
		}
		create_ambient_object = {
			type = "medium_debris_01_object"
			location = solar_system
		}
		create_ambient_object = {
			type = "medium_debris_01_object"
			location = solar_system
		}
		create_ambient_object = {
			type = "medium_debris_02_object"
			location = solar_system
		}
		create_ambient_object = {
			type = "medium_debris_02_object"
			location = solar_system
		}
		create_ambient_object = {
			type = "medium_debris_02_object"
			location = solar_system
		}
		create_ambient_object = {
			type = "medium_debris_02_object"
			location = solar_system
		}
		create_ambient_object = {
			type = "medium_debris_02_object"
			location = solar_system
		}
		create_ambient_object = {
			type = "small_debris_object"
			location = solar_system
		}
		create_ambient_object = {
			type = "small_debris_object"
			location = solar_system
		}
		create_ambient_object = {
			type = "small_debris_object"
			location = solar_system
		}
		create_ambient_object = {
			type = "small_debris_object"
			location = solar_system
		}
		create_ambient_object = {
			type = "small_debris_object"
			location = solar_system
		}
	}
}