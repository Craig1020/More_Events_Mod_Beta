######################################
# Under the Blanket
# Original idea by: GoldMath
# Code by:          Tuttu & GoldMath
# Writing by:       GoldMath
######################################

namespace = mem_under_blanket

# Initial event. Triggered by on_action "on_colony_1_year_old"
planet_event = {
	id = mem_under_blanket.1
	title = "mem_under_blanket.1.name"
	desc = "mem_under_blanket.1.desc"
	picture = GFX_evt_mining_operations
	show_sound = event_scanner
	location = ROOT
	
	is_triggered_only = yes
	
	# Used for easier localisation and planet selection
	immediate = {
		FROM = { 
			save_event_target_as = under_blanket_planet
		}
	}
	
	option = {
		trigger = {
			root.owner = {
				OR = {
					has_ethic = ethic_materialist
					has_ethic = ethic_fanatic_materialist
				}
			}
		}
		name = "mem_under_blanket.1.materialist"
		hidden_effect = {
			planet_event = { id = mem_under_blanket.2 days = 60 random = 10 }
		}
	}
	
	option = {
		trigger = {
			root.owner = {
				OR = {
					has_ethic = ethic_militarist
					has_ethic = ethic_fanatic_militarist
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
			}
		}
		name = "mem_under_blanket.1.xenomilit"
		hidden_effect = {
			planet_event = { id = mem_under_blanket.2 days = 60 random = 10 }
		}
	}
	
	option = {
		trigger = {
			root.owner = {
				NOR = {
					has_ethic = ethic_materialist
					has_ethic = ethic_fanatic_materialist
					has_ethic = ethic_militarist
					has_ethic = ethic_fanatic_militarist
					has_ethic = ethic_xenophobe
					has_ethic = ethic_fanatic_xenophobe
				}
			}
		}
		name = "mem_under_blanket.1.other"
		hidden_effect = {
			planet_event = { id = mem_under_blanket.2 days = 60 random = 10 }
		}
	}
	
	option = {
		name = "mem_under_blanket.1.deny"
		# No follow-up. Stop the event. Maybe add some influence as a reward ? 
		# You could also use a random list to decide whether the event should stop or if an attack could occur with a small chance after some time has passed.
	}
}

# Ground Team
ship_event = {
	id = mem_under_blanket.2
	title = "mem_under_blanket.2.name"
	desc = "mem_under_blanket.2.desc"
	picture = GFX_evt_in_the_dark
	show_sound = event_ship_bridge
	location = ROOT
	
	is_triggered_only = yes
			
	option = {
		name = "mem_under_blanket.2.a"
		root.owner = { 
			add_energy = 100 
			add_physics_research = 200
		}
	}
}