namespace = mem_planetary_shields


#A building construction has been completed.
# This = Planet
# From = Tile
planet_event = {
	id = mem_planetary_shields.1
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		is_ringworld = no
		from = {
			has_building = building_autochthon_monument
		}
	}
	
	immediate = {
		solar_system = {
			random_system_planet = {
				limit = {
					is_moon = no
				}
				create_ambient_object = {
					type = mhs_durin_intact_ring_01_object
					location = this
				}
			}
			last_created_ambient_object = {
				set_location = root
				set_ambient_object_flag = mem_planetary_shield_01
			}
		}
	}
}

#A building construction has been completed.
# This = Planet
# From = Tile
planet_event = {
	id = mem_planetary_shields.2
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		solar_system = {
			every_system_ambient_object = {
				limit = { 
					has_ambient_object_flag = mem_planetary_shield_01
				}
				destroy_ambient_object = this
			}
			every_system_planet = {
				limit = {
					is_ringworld = no
					any_tile = {
						has_building = building_autochthon_monument
						is_ruined = no
					}
				}
				solar_system = {
					random_system_planet = {
						limit = {
							is_moon = no
						}
						create_ambient_object = {
							type = mhs_durin_intact_ring_01_object
							location = this
						}
					}
					last_created_ambient_object = {
						set_location = root
						set_ambient_object_flag = mem_planetary_shield_01
					}
				}
			}
		}
	}
}

# Planet has reached 0 health
# This = Planet
# From = Bombarder
planet_event = {
	id = mem_planetary_shields.3
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		IF = {
			limit = {
				any_tile = {
					has_building = building_autochthon_monument
					is_ruined = no
				}
				random_tile = {
					limit = {
						has_building = building_autochthon_monument
					}
					set_ruined = yes
				}
			}
		}
	}
}